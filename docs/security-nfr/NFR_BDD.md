# Сценарии приемки для NFR

## Сценарий SEC-001: Аутентификация API запросов
  ### История: API Authentication
  - В роли разработчика API
  - Чтобы защитить систему от неавторизованного доступа
  - Я хочу гарантировать, что все запросы аутентифицированы

  ### Сценарий: Успешный доступ с валидным токеном
  - Given пользователь имеет валидный JWT токен
  - When он делает запрос к защищенному эндпоинту /api/v1/bookings
  - Then он получает статус 200 OK
  - And ответ содержит запрошенные данные

  ### Сценарий: Отказ в доступе без токена
  - Given пользователь не предоставляет токен аутентификации
  - When он делает запрос к защищенному эндпоинту /api/v1/bookings
  - Then он получает статус 401 Unauthorized
  - And ответ содержит сообщение об ошибке аутентификации

## Сценарий SEC-002: Защита от brute-force атак
  ### История: Brute-force Protection
  - В роли системы безопасности
  - Чтобы предотвратить подбор учетных данных
  - Я хочу ограничить частоту запросов аутентификации

  ### Сценарий: Блокировка при превышении лимита попыток
  - Given с IP адреса было 5 неудачных попыток входа за минуту
  - When пользователь делает 6-ю попытку аутентификации
  - Then система возвращает статус 429 Too Many Requests
  - And IP временно блокируется на 5 минут

  ### Сценарий: Сброс счетчика после успешной аутентификации
  - Given пользователь имеет 3 неудачные попытки входа
  - When он успешно аутентифицируется на 4-й попытке
  - Then счетчик неудачных попыток сбрасывается
  - And пользователь получает доступ к системе

## Сценарий PERF-001: Производительность системы бронирования
  ## История: Booking Performance
  - В роли пользователя системы
  - Чтобы не тратить время на ожидание
  - Я хочу быстро бронировать парковочные места

  ### Сценарий: Быстрое создание бронирования
  - Given система работает в нормальном режиме
  - When пользователь создает новое бронирование
  - Then время ответа составляет менее 500 мс в 95% случаев
  - And операция завершается успешно

  ### Сценарий: Граничный случай при высокой нагрузке
  - Given система испытывает пиковую нагрузку (100 RPS)
  - When пользователь пытается создать бронирование
  - Then система обрабатывает запрос не дольше 2 секунд
  - And не возвращает ошибки таймаута
