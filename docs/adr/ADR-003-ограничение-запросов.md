# ADR-003: Реализация Rate Limiting

## Статус
Принято (Accepted)

## Контекст
Система бронирования парковочных мест подвержена DDoS атакам и brute-force атакам на эндпоинты аутентификации. Необходимо защитить доступность сервиса.

## Решение
Внедрить многоуровневое ограничение запросов:
1. **Глобальный лимит**: 1000 запросов в час на IP
2. **Лимит аутентификации**: 5 попыток входа в минуту на IP
3. **Лимит бронирований**: 10 запросов в минуту на пользователя
4. **Лимит проверки доступности**: 30 запросов в минуту на IP

Использовать Redis для хранения счетчиков с TTL.
При превышении лимита возвращать HTTP 429 с информацией о времени возобновления.

## Последствия
### Положительные
- Защита от DDoS и brute-force атак
- Справедливое распределение ресурсов
- Соответствие NFR требованиям

### Отрицательные
- Дополнительная нагрузка на инфраструктуру
- Сложность отладки при активном ограничении

## Связи
- **NFR**: SEC-002, PERF-001
- **Угрозы**: F7 (Denial of Service), R-02 (DDoS атаки)
- **Тесты**: `tests/test_rate_limiting.py`
- **Код**: `app/security/rate_limiter.py`, `app/middleware/rate_limit.py`
